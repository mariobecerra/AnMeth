---
title: "Tarea_02"
author: "Mario Becerra"
output: html_document
---

```{r setup}
options(digits=2)
setwd('/home/mbc/Dropbox/ITAM_Dropbox/Métodos Analíticos')
library(ggplot2)
library(plyr)
library(dplyr)
datos <- read.csv('./Notas LuisFe/clase_1_mbasket/datos/srep00196-s3.csv')
load(file='./Tareas/Tarea02_baskets.RData')
```

Se cargó el archivo **.RData** que se había creado anteriormente. Este archivo contiene una lista larga de las recetas y sus ingredientes.

```{r}
head(baskets, 10)
```

El código con el que se creó la lista fue el siguiente:

```{r}
# 
# baskets <- lapply(seq(nrow(datos)), function(i){ 
#   b <- as.vector(as.matrix(datos[i,2:31]))
#   data.frame(id = i, region=datos[i,1],  ing = b[b!=""] )}) %>%
#   rbind_all
```

El número total de ingredientes es:

```{r}
length(unique(baskets$ing))
```

El número promedio de ingredientes por receta es:

```{r}
# b<-sapply(1:nrow(datos), function(i){
#   a<-datos[i,]!=""
#   sum(a)
#   })
# mean(b)
```

Encontrando los 20 itemsets más frecuentes de tamaño 1:

```{r}
ing_frec <- baskets %>%
    group_by(ing) %>%
    summarise(frec = n()) %>%
    ungroup() %>%
    mutate(p = frec / length(unique(baskets$id))) %>%
    arrange(desc(frec))
ing_frec[1:20,]
```

Ahora los 20 itemses más frecuentes de tamaño 2:

```{r}
#baskets.lista <- lapply(unique(baskets$id), function(i){ filter(baskets, id==i)$ing})
transac <- as(baskets.lista, 'transactions')
```







